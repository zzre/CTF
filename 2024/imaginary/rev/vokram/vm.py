#!/usr/bin/env python3
from collections import deque

def vokram(text, program):
    global prev
    while True:
        for pat, repl, stop in program:
            # if pat and pat in text:
            if pat in text:
                text = text.replace(pat, repl, 1)
                # print(pat, repl, text)
                # input()
                # prev.popleft()
                # prev.append((pat, repl, text))
                if stop:
                    return text
                break
        else:
            return text


def parse(source):
    program = []
    for line in source.strip().splitlines():
        pat, repl = line.split(":", 1)
        stop = False
        if len(repl) > 0 and repl[0] == ":":
            repl = repl[1:]
            stop = True
        if ":" in repl:
            raise ValueError("invalid rule: %r" % line)
        program.append((pat, repl, stop))
    return program

def reverse(source):
    program = []
    for line in source.strip().splitlines():
        pat, repl = line.split(":", 1)
        stop = False
        if len(repl) > 0 and repl[0] == ":":
            repl = repl[1:]
            stop = True
        if ":" in repl:
            raise ValueError("invalid rule: %r" % line)
        program.append((repl, pat, stop))
    return program

if __name__ == "__main__":
    import sys

    source_file = sys.argv[1]
    input_str = sys.argv[2]
    with open(source_file) as f:
        # program = reverse(f.read())[::-1]
        program = parse(f.read())

    # input_str = 'π¦¥π¦¥π¦¥π”Όπ¦¥π”Όπ¦¥π¥½π¦¥π”Όπ¦¥π”Όπ”Όπ”Όπ¦¥π”Όπ¦¥π¥½π¥½π”Όπ”Όπ¥½π¥½π”Όπ¦¥π¦¥π¥½π”Όπ”Όπ¥½π¥½π¦¥π¦¥π¦¥π¦¥π¦¥π¦¥π”Όπ¥½π¥½π”Όπ”Όπ¥½π”Όπ”Όπ”Όπ¦¥π¦¥π”Όπ”Όπ¥½π¦¥π”Όπ¦¥π”Όπ”Όπ”Όπ”Όπ¦¥π”Όπ”Όπ¦¥π¥½π¦¥π¦¥π”Όπ”Όπ¥½π¦¥π¦¥π¦¥π”Όπ¦¥π¥½π¦¥π”Όπ¦¥π¥½π¥½π¥½π”Όπ¥½π¥½π¥½π¥½π¦¥π”Όπ¥½π¥½π”Όπ¦¥π”Όπ”Όπ”Όπ”Όπ”Όπ¥½π¥½π”Όπ¥½π¦¥π¦¥π¦¥π¦¥π¥½π¦¥π”Όπ¦¥π”Όπ¦¥π”Όπ¥½π¦¥π”Όπ¥½π¦¥π”Όπ¥½π¥½π”Όπ¦¥π¥½π¥½π¥½π¦¥π”Όπ¥½π¦¥π”Όπ¦¥π¦¥π”Όπ¥½π”Όπ¦¥π¥½π”Όπ¦¥π¥½π”Όπ¦¥π”Όπ¦¥π¦¥π”Όπ¦¥π”Όπ¦¥π”Όπ”Όπ¥½π”Όπ”Όπ¥½π¦¥π¦¥π”Όπ”Όπ¦¥π¦¥π¥½π¦¥π”Όπ¦¥π¦¥π¥½π”Όπ¥½π¦¥π¦¥π”Όπ¦¥π¦¥π¥½π¦¥π¥½π”Όπ¥½π¥½π¥½π”Όπ¥½π¦¥π”Όπ”Όπ”Όπ”Όπ”Όπ”Όπ¥½π¥½π¥½π”Όπ¦¥π¥½π¦¥π¥½π¦¥π¦¥π¥½π¥½π”Όπ¥½π¥½π¦¥π¥½π”Όπ¥½π¦¥π”Όπ”Όπ”Όπ”Όπ”Όπ¦¥π¥½π”Όπ¥½π¦¥π¦¥π¥½π”Όπ¦¥π¥½π¥½π¥½π”Όπ”Ό'
    # input_str = '''Wrongππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½οΏ½π¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½οΏ½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ποΏ½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ποΏ½π¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½οΏ½π¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½οΏ½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ποΏ½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ποΏ½π¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½οΏ½π¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½οΏ½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ποΏ½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ποΏ½π¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½οΏ½π¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½οΏ½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ποΏ½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ποΏ½π¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½οΏ½π¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½οΏ½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ποΏ½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ποΏ½π¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½οΏ½π¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½οΏ½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½ππ¥½γ‘π¦¥π½π”Όπ¥Έπ¥½π–π¦¥π™π¦¥π™π¦¥β­•π¦¥π§π”Όβπ¥½γ‚’π¦¥π€π¥½π©π”Όπ’—π”Όπ¦π¦¥π¦ƒπ¥½π‘ƒοΏ½ 
# π”•π¦¥π•π”Όβ™β™π¥½π΅π”Όπ’…π¥½β¨π¦¥π©π”Όπ¥π¥½ππ¦¥π‘—π¥½π›‚π”Όπ’π¦¥π’«π”Όβ›Ίπ”Όππ”ΌπΏπ”Όπ£π”Όπ«π”Όβ¤΄π”Όγπ¥½π¨π¦¥π“•π¥½π΄π”Όπ§°π¥½'''

    import itertools
    prev = deque([0]*1900)
    cs = 'ZMAFWuRkiavYjpJ5Dc1beq2y9UNK*s87z!BGTlCHhor6&w$.(VQxfO^@LnS4_t#gIdX{0}_Pm3%E)'
    input_str = '}'
    # for input_str in cs:
    #     print(input_str, vokram(input_str+'c'+'}', program)[-5:])
    
    print(vokram('ictf1'+input_str*40, program))
    # for c in reversed(prev):
    #     print(c)
    #     input()
